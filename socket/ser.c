#include <stdio.h>        // printf, fgets ë“± ì…ì¶œë ¥ í•¨ìˆ˜ ì‚¬ìš©
#include <string.h>       // strlen, strcmp, memset ë“± ë¬¸ìì—´ í•¨ìˆ˜
#include <unistd.h>       // close í•¨ìˆ˜ (ì†Œì¼“ ë‹«ê¸°)
#include <pthread.h>      // ìŠ¤ë ˆë“œ ê´€ë ¨ í•¨ìˆ˜ë“¤
#include <arpa/inet.h>    // ë„¤íŠ¸ì›Œí¬ í†µì‹  í•¨ìˆ˜ë“¤ (socket, bind, connect ë“±)
#include <time.h>         // ì‹œê°„ ê´€ë ¨ í•¨ìˆ˜

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ì „ì—­ ë³€ìˆ˜ (ëª¨ë“  í•¨ìˆ˜ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
int client_sock;          // í´ë¼ì´ì–¸íŠ¸ì™€ í†µì‹ í•  ì†Œì¼“ ë²ˆí˜¸
int running = 1;          // í”„ë¡œê·¸ë¨ ì‹¤í–‰ ìƒíƒœ (1=ì‹¤í–‰ì¤‘, 0=ì¢…ë£Œ)
pthread_mutex_t print_mutex = PTHREAD_MUTEX_INITIALIZER; // ì¶œë ¥ ì ê¸ˆì¥ì¹˜ ì´ˆê¸°í™”

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ì‹œê°„ ì¶œë ¥ í•¨ìˆ˜
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
void print_time() {
    time_t now;                    // í˜„ì¬ ì‹œê°„ì„ ì €ì¥í•  ë³€ìˆ˜
    struct tm *t;                  // ì‹œê°„ êµ¬ì¡°ì²´ í¬ì¸í„°
    time(&now);                    // í˜„ì¬ ì‹œê°„ ê°€ì ¸ì˜¤ê¸°
    t = localtime(&now);           // ìš°ë¦¬ë‚˜ë¼ ì‹œê°„ìœ¼ë¡œ ë³€í™˜
    printf("[%02d:%02d:%02d] ",    // [ì‹œ:ë¶„:ì´ˆ] í˜•ì‹ìœ¼ë¡œ ì¶œë ¥
           t->tm_hour,             // ì‹œê°„ (0~23)
           t->tm_min,              // ë¶„ (0~59)
           t->tm_sec);             // ì´ˆ (0~59)
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ë©”ì‹œì§€ ë°›ê¸° ìŠ¤ë ˆë“œ (ê³„ì† ìƒëŒ€ë°© ë©”ì‹œì§€ ê¸°ë‹¤ë¦¼)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
void* receive_thread(void* arg) {  // ìŠ¤ë ˆë“œ í•¨ìˆ˜ (void* ë§¤ê°œë³€ìˆ˜ í•„ìˆ˜)
    char buffer[1024];             // ë°›ì€ ë©”ì‹œì§€ ì €ì¥í•  ê³µê°„ (1024ë°”ì´íŠ¸)
    
    while(running) {                           // runningì´ 1ì¸ ë™ì•ˆ ê³„ì† ì‹¤í–‰
        memset(buffer, 0, sizeof(buffer));     // bufferë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™” (ê¹¨ë—ì´ ì²­ì†Œ)
        int recv_len = recv(client_sock,       // ì†Œì¼“ì—ì„œ ë©”ì‹œì§€ ë°›ê¸°
                           buffer,             // ë°›ì€ ë°ì´í„°ë¥¼ bufferì— ì €ì¥
                           sizeof(buffer),     // ìµœëŒ€ 1024ë°”ì´íŠ¸ê¹Œì§€
                           0);                 // ì˜µì…˜ (0=ê¸°ë³¸)
        
        if (recv_len <= 0) {                   // 0 ì´í•˜ë©´ ì—°ê²° ëŠê¹€
            pthread_mutex_lock(&print_mutex);  // ğŸ”’ ì¶œë ¥ ì ê¸ˆ
            printf("\n");                      // ì¤„ë°”ê¿ˆ
            print_time();                      // ì‹œê°„ ì¶œë ¥
            printf("í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ì¢…ë£Œ\n\n"); // ë©”ì‹œì§€ ì¶œë ¥
            pthread_mutex_unlock(&print_mutex);// ğŸ”“ ì¶œë ¥ í•´ì œ
            running = 0;                       // í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì‹ í˜¸
            break;                             // while ë°˜ë³µë¬¸ íƒˆì¶œ
        }
        
        pthread_mutex_lock(&print_mutex);      // ğŸ”’ ì¶œë ¥ ì ê¸ˆ
        printf("\n");                          // ì¤„ë°”ê¿ˆ
        print_time();                          // ì‹œê°„ ì¶œë ¥
        printf("í´ë¼ì´ì–¸íŠ¸: %s\n\n", buffer);  // ë°›ì€ ë©”ì‹œì§€ ì¶œë ¥
        pthread_mutex_unlock(&print_mutex);    // ğŸ”“ ì¶œë ¥ í•´ì œ
        
        if (strcmp(buffer, "quit") == 0) {     // ë©”ì‹œì§€ê°€ "quit"ì´ë©´
            running = 0;                       // í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì‹ í˜¸
            break;                             // while ë°˜ë³µë¬¸ íƒˆì¶œ
        }
    }
    
    return NULL;                               // ìŠ¤ë ˆë“œ ì¢…ë£Œ (NULL ë°˜í™˜ í•„ìˆ˜)
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ë©”ì‹œì§€ ë³´ë‚´ê¸° ìŠ¤ë ˆë“œ (ë‚´ê°€ ì…ë ¥í•œ ê±° ë³´ëƒ„)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
void* send_thread(void* arg) {       // ìŠ¤ë ˆë“œ í•¨ìˆ˜
    char message[1024];              // ë³´ë‚¼ ë©”ì‹œì§€ ì €ì¥í•  ê³µê°„
    
    // ì²« ì…ë ¥ í”„ë¡¬í”„íŠ¸ ì¶œë ¥
    pthread_mutex_lock(&print_mutex);      // ğŸ”’ ì¶œë ¥ ì ê¸ˆ
    print_time();                          // ì‹œê°„ ì¶œë ¥
    printf("ë‚˜: ");                        // "ë‚˜: " ì¶œë ¥
    fflush(stdout);                        // ë²„í¼ ë¹„ìš°ê¸° (ì¦‰ì‹œ ì¶œë ¥)
    pthread_mutex_unlock(&print_mutex);    // ğŸ”“ ì¶œë ¥ í•´ì œ
    
    while(running) {                                  // runningì´ 1ì¸ ë™ì•ˆ ë°˜ë³µ
        fgets(message, sizeof(message), stdin);       // í‚¤ë³´ë“œ ì…ë ¥ ë°›ê¸° (ì—”í„°ê¹Œì§€)
        message[strcspn(message, "\n")] = 0;          // ì—”í„°(\n)ë¥¼ ì œê±° (ë¬¸ìì—´ ëìœ¼ë¡œ)
        
        if (strlen(message) == 0) {                   // ë¹ˆ ì…ë ¥ì´ë©´
            pthread_mutex_lock(&print_mutex);         // ğŸ”’ ì¶œë ¥ ì ê¸ˆ
            print_time();                             // ì‹œê°„ ì¶œë ¥
            printf("ë‚˜: ");                           // "ë‚˜: " ì¶œë ¥
            fflush(stdout);                           // ì¦‰ì‹œ ì¶œë ¥
            pthread_mutex_unlock(&print_mutex);       // ğŸ”“ ì¶œë ¥ í•´ì œ
            continue;                                 // ë‹¤ìŒ ë°˜ë³µìœ¼ë¡œ
        }
        
        send(client_sock,                // ì†Œì¼“ì„ í†µí•´ ë©”ì‹œì§€ ì „ì†¡
             message,                    // ë³´ë‚¼ ë©”ì‹œì§€
             strlen(message),            // ë©”ì‹œì§€ ê¸¸ì´
             0);                         // ì˜µì…˜ (0=ê¸°ë³¸)
        
        if (strcmp(message, "quit") == 0) {           // "quit" ì…ë ¥í•˜ë©´
            pthread_mutex_lock(&print_mutex);         // ğŸ”’ ì¶œë ¥ ì ê¸ˆ
            printf("\nì±„íŒ… ì¢…ë£Œ\n");                  // ì¢…ë£Œ ë©”ì‹œì§€
            pthread_mutex_unlock(&print_mutex);       // ğŸ”“ ì¶œë ¥ í•´ì œ
            running = 0;                              // í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì‹ í˜¸
            break;                                    // while ë°˜ë³µë¬¸ íƒˆì¶œ
        }
        
        // ë‹¤ìŒ ì…ë ¥ í”„ë¡¬í”„íŠ¸ ì¶œë ¥
        if (running) {                          // ì•„ì§ ì‹¤í–‰ ì¤‘ì´ë©´
            pthread_mutex_lock(&print_mutex);   // ğŸ”’ ì¶œë ¥ ì ê¸ˆ
            print_time();                       // ì‹œê°„ ì¶œë ¥
            printf("ë‚˜: ");                     // "ë‚˜: " ì¶œë ¥
            fflush(stdout);                     // ì¦‰ì‹œ ì¶œë ¥
            pthread_mutex_unlock(&print_mutex); // ğŸ”“ ì¶œë ¥ í•´ì œ
        }
    }
    
    return NULL;                        // ìŠ¤ë ˆë“œ ì¢…ë£Œ
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ë©”ì¸ í•¨ìˆ˜ (í”„ë¡œê·¸ë¨ ì‹œì‘ì )
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
int main() {
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 1ë‹¨ê³„: ì„œë²„ ì†Œì¼“ ìƒì„±
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    int server_sock = socket(AF_INET,      // IPv4 ì¸í„°ë„· í”„ë¡œí† ì½œ ì‚¬ìš©
                            SOCK_STREAM,   // TCP ë°©ì‹ (ì‹ ë¢°ì„± ìˆëŠ” í†µì‹ )
                            0);            // í”„ë¡œí† ì½œ ìë™ ì„ íƒ
    printf("ì„œë²„ ì†Œì¼“ ìƒì„±\n");
    
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // ì†Œì¼“ ì¬ì‚¬ìš© ì˜µì…˜ ì„¤ì • (ì„œë²„ ì¬ì‹œì‘ ì‹œ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥)
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    int opt = 1;                           // ì˜µì…˜ ê°’ (1=í™œì„±í™”)
    setsockopt(server_sock,                // ì„¤ì •í•  ì†Œì¼“
               SOL_SOCKET,                 // ì†Œì¼“ ë ˆë²¨ ì˜µì…˜
               SO_REUSEADDR,               // ì£¼ì†Œ ì¬ì‚¬ìš© í—ˆìš©
               &opt,                       // ì˜µì…˜ ê°’ ì£¼ì†Œ
               sizeof(opt));               // ì˜µì…˜ í¬ê¸°
    
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 2ë‹¨ê³„: ì„œë²„ ì£¼ì†Œ ì„¤ì •
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    struct sockaddr_in server_addr;               // ì„œë²„ ì£¼ì†Œ êµ¬ì¡°ì²´
    server_addr.sin_family = AF_INET;             // IPv4 ì‚¬ìš©
    server_addr.sin_port = htons(8080);           // í¬íŠ¸ 8080 (ë„¤íŠ¸ì›Œí¬ ë°”ì´íŠ¸ ìˆœì„œë¡œ ë³€í™˜)
    server_addr.sin_addr.s_addr = INADDR_ANY;     // ëª¨ë“  IPì—ì„œ ì ‘ì† í—ˆìš© (0.0.0.0)
    
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 3ë‹¨ê³„: ë°”ì¸ë”© (ì†Œì¼“ì— ì£¼ì†Œ í• ë‹¹)
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    bind(server_sock,                             // ë°”ì¸ë”©í•  ì†Œì¼“
         (struct sockaddr*)&server_addr,          // ì£¼ì†Œ ì •ë³´ (í˜•ë³€í™˜)
         sizeof(server_addr));                    // ì£¼ì†Œ í¬ê¸°
    printf("í¬íŠ¸ 8080 ë°”ì¸ë”©\n");
    
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 4ë‹¨ê³„: ì—°ê²° ëŒ€ê¸° ëª¨ë“œ
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    listen(server_sock,                           // ëŒ€ê¸°í•  ì†Œì¼“
           5);                                    // ëŒ€ê¸° í í¬ê¸° (ìµœëŒ€ 5ëª…)
    printf("í´ë¼ì´ì–¸íŠ¸ ëŒ€ê¸° ì¤‘...\n\n");
    
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 5ë‹¨ê³„: í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ìˆ˜ë½
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    struct sockaddr_in client_addr;               // í´ë¼ì´ì–¸íŠ¸ ì£¼ì†Œ ì €ì¥
    socklen_t client_len = sizeof(client_addr);   // ì£¼ì†Œ í¬ê¸°
    client_sock = accept(server_sock,             // ëŒ€ê¸° ì¤‘ì¸ ì†Œì¼“
                        (struct sockaddr*)&client_addr,  // í´ë¼ì´ì–¸íŠ¸ ì£¼ì†Œ ì €ì¥
                        &client_len);             // ì£¼ì†Œ í¬ê¸°
    printf("í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ë¨!\n");
    printf("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n");
    printf("ì±„íŒ… ì‹œì‘!\n");
    printf("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n");
    
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 6ë‹¨ê³„: ìŠ¤ë ˆë“œ ìƒì„± (ë°›ê¸°/ë³´ë‚´ê¸° ë™ì‹œ ì‹¤í–‰)
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    pthread_t recv_tid, send_tid;                 // ìŠ¤ë ˆë“œ ID ë³€ìˆ˜
    
    pthread_create(&recv_tid,                     // ìŠ¤ë ˆë“œ ID ì €ì¥ ìœ„ì¹˜
                   NULL,                          // ê¸°ë³¸ ì†ì„± ì‚¬ìš©
                   receive_thread,                // ì‹¤í–‰í•  í•¨ìˆ˜
                   NULL);                         // í•¨ìˆ˜ì— ì „ë‹¬í•  ì¸ì (ì—†ìŒ)
    
    pthread_create(&send_tid,                     // ìŠ¤ë ˆë“œ ID ì €ì¥ ìœ„ì¹˜
                   NULL,                          // ê¸°ë³¸ ì†ì„± ì‚¬ìš©
                   send_thread,                   // ì‹¤í–‰í•  í•¨ìˆ˜
                   NULL);                         // í•¨ìˆ˜ì— ì „ë‹¬í•  ì¸ì (ì—†ìŒ)
    
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 7ë‹¨ê³„: ìŠ¤ë ˆë“œ ì¢…ë£Œ ëŒ€ê¸°
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    pthread_join(recv_tid, NULL);                 // ë°›ê¸° ìŠ¤ë ˆë“œ ì¢…ë£Œ ëŒ€ê¸°
    pthread_join(send_tid, NULL);                 // ë³´ë‚´ê¸° ìŠ¤ë ˆë“œ ì¢…ë£Œ ëŒ€ê¸°
    
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 8ë‹¨ê³„: ì •ë¦¬ ì‘ì—…
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    pthread_mutex_destroy(&print_mutex);          // ë®¤í…ìŠ¤ í•´ì œ
    close(client_sock);                           // í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ ë‹«ê¸°
    close(server_sock);                           // ì„œë²„ ì†Œì¼“ ë‹«ê¸°
    printf("ì„œë²„ ì¢…ë£Œ\n");
    
    return 0;                                     // í”„ë¡œê·¸ë¨ ì •ìƒ ì¢…ë£Œ
}